Starting solver test...

🧪 Testing Current Solver Configuration

============================================================
📅 Loading pre-scheduled data...
  - Pre-scheduled weeks: 1
  - Pre-scheduled games: 16
  - Teams with pre-scheduled games: 32

📋 Generating matchups...
🔍 Division AFC_North: 4 teams
🔍 Division AFC_South: 4 teams
🔍 Division AFC_East: 4 teams
🔍 Division AFC_West: 4 teams
🔍 Division NFC_North: 4 teams
🔍 Division NFC_South: 4 teams
🔍 Division NFC_East: 4 teams
🔍 Division NFC_West: 4 teams
🔍 Division games generated: 96
🔍 Conference AFC: shortDivisions=North,South,East,West, intraMatchups=[["North","South"],["East","West"]]
🔍 Conference NFC: shortDivisions=North,South,East,West, intraMatchups=[["North","South"],["East","West"]]
🔍 Intra-conference games generated: 64
🔍 Inter-conference matchups for year 2026: [
  [ 'AFC_North', 'NFC_South' ],
  [ 'AFC_South', 'NFC_East' ],
  [ 'AFC_East', 'NFC_West' ],
  [ 'AFC_West', 'NFC_North' ]
]
🔍 Inter-conference games generated: 64
🔍 Same-place finisher games generated: 32
🔍 Teams needing extra game: 32
🔍 Extra 17th games generated: 20
🔍 Generated matchups: 276
🔍 Rotation year: 2026
🔍 Divisions: [
  'AFC_North',
  'AFC_South',
  'AFC_East',
  'AFC_West',
  'NFC_North',
  'NFC_South',
  'NFC_East',
  'NFC_West'
]
🔍 Conferences: [ 'AFC', 'NFC' ]
📊 Matchup Statistics:
   Division Games: 96 (expected: 96)
   Intra-Conference Games: 96 (expected: 96)
   Inter-Conference Games: 84 (expected: 80)
   Total Games: 276 (expected: 272)
  - Total matchups generated: 276
  - Matchups for solver: 270
  - Matchups already scheduled: 6

📊 Expected Statistics:
  - Total games needed: 272
  - Pre-scheduled games: 16
  - Solver needs to schedule: 270
  - Teams: 32
  - Weeks: 18 (solver responsible for 2-18)

🔧 Creating solver with current configuration...
  Constraints:
    - maxGamesPerWeek: 18
    - byeWeekDistribution: balanced
    - preventConsecutiveRematches: true (DISABLED in solver, moved to postprocessing)
    - Primetime: ALL DISABLED
    - Consecutive rematches: DISABLED (moved to postprocessing)
    - Team week constraints: DISABLED (redundant)

⏳ Solving (this may take a while)...
  - Timeout: 5 minutes (300 seconds)
  - If this hangs, press Ctrl+C after 30 seconds

🧮 Initializing GLPK solver...
📋 Creating linear programming problem...
  📅 Team ravens: 1 pre-scheduled, 16 to solve
  📅 Team browns: 1 pre-scheduled, 16 to solve
  📅 Team bengals: 1 pre-scheduled, 16 to solve
  📅 Team steelers: 1 pre-scheduled, 16 to solve
  📅 Team texans: 1 pre-scheduled, 16 to solve
  📅 Team colts: 1 pre-scheduled, 16 to solve
  📅 Team jaguars: 1 pre-scheduled, 16 to solve
  📅 Team titans: 1 pre-scheduled, 16 to solve
  📅 Team bills: 1 pre-scheduled, 16 to solve
  📅 Team dolphins: 1 pre-scheduled, 16 to solve
  📅 Team jets: 1 pre-scheduled, 16 to solve
  📅 Team patriots: 1 pre-scheduled, 16 to solve
  📅 Team chiefs: 1 pre-scheduled, 16 to solve
  📅 Team raiders: 1 pre-scheduled, 16 to solve
  📅 Team chargers: 1 pre-scheduled, 16 to solve
  📅 Team broncos: 1 pre-scheduled, 16 to solve
  📅 Team bears: 1 pre-scheduled, 16 to solve
  📅 Team lions: 1 pre-scheduled, 16 to solve
  📅 Team packers: 1 pre-scheduled, 16 to solve
  📅 Team vikings: 1 pre-scheduled, 16 to solve
  📅 Team falcons: 1 pre-scheduled, 16 to solve
  📅 Team panthers: 1 pre-scheduled, 16 to solve
  📅 Team saints: 1 pre-scheduled, 16 to solve
  📅 Team buccaneers: 1 pre-scheduled, 16 to solve
  📅 Team cowboys: 1 pre-scheduled, 16 to solve
  📅 Team eagles: 1 pre-scheduled, 16 to solve
  📅 Team giants: 1 pre-scheduled, 16 to solve
  📅 Team commanders: 1 pre-scheduled, 16 to solve
  📅 Team cardinals: 1 pre-scheduled, 16 to solve
  📅 Team rams: 1 pre-scheduled, 16 to solve
  📅 Team 49ers: 1 pre-scheduled, 16 to solve
  📅 Team seahawks: 1 pre-scheduled, 16 to solve
  ⏭️  Week 1 is pre-scheduled, skipping bye week constraint
  ⏭️  Week 1 is pre-scheduled, skipping balanced distribution constraint
  ✅ NEW: Primetime constraints enabled (MNF, TNF, SNF)
🔧 GLPK Problem Stats (CORE CONSTRAINTS ONLY):
  - Variables: 4860
  - Constraints: 370
  - Matchups: 270
  - Teams: 32
  - Weeks: 18
  ✅ Bye weeks prevented in weeks 1-4 and 15-18
  ✅ Inter-conference distribution limits
  ✅ Maximum 6 teams on bye per week
  ✅ Balanced weekly distribution
  ✅ Constraint ordering optimized (EQUALITY → TIGHT → INEQUALITIES → COMPLEX)
  ⚠️  PRIMETIME CONSTRAINTS DISABLED (too complex for solver)
    - Game times will be assigned in postprocessing phase
    - This significantly reduces solver complexity
  - Consecutive rematches prevented: true
  - Sample constraints: [
  {
    name: 'matchup_0_exactly_once',
    vars: [
      [Object], [Object], [Object],
      [Object], [Object], [Object],
      [Object], [Object], [Object],
      [Object], [Object], [Object],
      [Object], [Object], [Object],
      [Object], [Object], [Object]
    ],
    bnds: { type: 5, lb: 1, ub: 1 }
  },
  {
    name: 'matchup_1_exactly_once',
    vars: [
      [Object], [Object], [Object],
      [Object], [Object], [Object],
      [Object], [Object], [Object],
      [Object], [Object], [Object],
      [Object], [Object], [Object],
      [Object], [Object], [Object]
    ],
    bnds: { type: 5, lb: 1, ub: 1 }
  }
]
🔧 Bounds created for 4860 variables (including bye variables)
🔧 Solving with GLPK (this may take a while)...
   - Variables: 4860
   - Constraints: 370
   - Timeout: 5 minutes (300 seconds)
   - Please be patient, this is a complex optimization problem...
🔍 GLPK Result Summary:
  - Time: 3.214ms
  - Status: 4
  - Objective: 0
  - Variables set: 0
🔍 GLPK Status Code: 4
🔍 Extracting solution from GLPK result...
  - Result vars: 4860
  - Sample vars: [
  [ 'x_0_1', 0 ],
  [ 'x_0_2', 0 ],
  [ 'x_0_3', 0 ],
  [ 'x_0_4', 0 ],
  [ 'x_0_5', 0 ]
]
  📊 Total games extracted: 0
  🏈 Primetime games: 0 MNF, 0 TNF, 0 SNF
✅ GLPK found solution with 0 games

============================================================
🎯 SOLVER RESULT:
============================================================
  Status: unbounded
  Solve Time: 7636ms (7.64s)
  Games Scheduled: 0
  Objective Value: 0
  Constraints Satisfied: { totalGames: 0, weeksUsed: 0, teamsWithByes: 0 }

❌ UNBOUNDED: The problem is missing constraints.

This is a bug in the constraint formulation!
The solver found that some variables can go to infinity.

✅ Test completed!
